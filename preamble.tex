
%------------------------------------------------------------------------------- 
% Math packages
%------------------------------------------------------------------------------- 

% The "amsmath" package provides advanced math extensions.
\usepackage{amsmath}

% The "amssymb" package adds new symbols to be used in math mode.
\usepackage{amssymb}

% The "amsthm" package adds the "proof" environment and "theoremstyle" command.
\usepackage{amsthm}
\theoremstyle{definition}

% The "faktor" package adds the "faktor" macro for variable substitution (i.e. vulgar fractions). This depends on the "amssymb" package.
\usepackage{faktor}

% The "semantic" package adds new macros for (PL-style) inference rules.
\usepackage[inference]{semantic}

%------------------------------------------------------------------------------- 
% Figure packages
%------------------------------------------------------------------------------- 

% The "fancyvrb" package provides advanced customization of verbatim environments, such as font families, numbering lines, box borders etc.
\usepackage{fancyvrb}

% The "graphicx" package allows including external graphic files.
%\usepackage{graphicx}

% The "subfig" package allows multiple sub-figures within a single figure, where sub-figures can be separately captioned and labeled, e.g. Figure % 1.2(a). This is a replacement for the older "subfigure" package.
\usepackage{subfig}

% HACK: The caption package (included by the subfig package) requires a counter for ACM's copyright box.
\newcounter{copyrightbox}

% The "float" package allows the "H" option for figures, which places a float % at a precise location.
\usepackage{float}

% The "caption" package allows captions for figures that are not actually in a floating environment (e.g. framed environment).
%\usepackage{caption}

% The "mdframed" package creates framed regions that can break across pages.
\usepackage{mdframed}

% The "algorithm2e" package provides keywords for typesetting algorithms. The "noend" option disables the printing of the "end" keywords. Use "algomargin" to decrease the margins for all algorithms.


% The "multirow" package allows table cells to span more than one row.
\usepackage{multirow}

% The "balance" package allows columns of the last page to be of equal height.
\usepackage{balance}

% The "fixltx2e" package prevents two-column figures from being placed out-of-order wrt regular (one-column) figures.
%\usepackage{fixltx2e}

% The "beramono" package provides Bitstream Vera Mono, which has a bold typewritter fontface.
\usepackage[scaled]{beramono}
\usepackage[T1]{fontenc}

% The "courier" package provides Courier, which has a bold typewritter fontface.
%\usepackage{courier}


%------------------------------------------------------------------------------- 
% Misc packages
%------------------------------------------------------------------------------- 

% The "optional" package allows multiple versions of the document via optional text.
%\usepackage{optional}

% The "lmodern" package allows for better font size support https://ctan.org/pkg/lm
\usepackage{lmodern}

% The "upquote" package formats quotes appropriately in verbatim
\usepackage{upquote}

% The "xstring" package allows switch/case conditionals.
\usepackage{xstring}

% The "xcolor" package allows colored text and backgrounds.
\usepackage[table]{xcolor}

% The "xspace" package allows us to write unit macros without protected spacing
\usepackage{xspace}

% The "soul" package allows highlighting.
\usepackage{soul}

% The "ulem" package allows highlighting.
\usepackage[normalem]{ulem}

% The "tocloft" packages allows generating custom lists that are similar to table of contents, list of figures etc.
% \usepackage[subfigure]{tocloft}

% The "hyperref" package allows creating hyperlinks. Note that it must be the last package loaded, and will automatically includes the "url" package.
\usepackage[colorlinks]{hyperref}
\hypersetup{ 
  linkcolor=blue
} 

% The "hypcap" package fixes "hyperref" so that hyperlinks go to the top of a float (as opposed to its caption).
\usepackage[all]{hypcap}

% Adjust whitespace before/after floats
\setlength{\textfloatsep}{6pt plus 1.0pt minus 2.0pt}
\setlength{\floatsep}{6pt plus 1.0pt minus 1.0pt}

%%%%
%% Use better margins
%%%%
\usepackage[margin=0.7in]{geometry}

%%%%
%% Control header and footer 
%%%%
\usepackage{lastpage} % used in customized footer
\usepackage{fancyhdr}
\setlength{\headheight}{16pt} 
\pagestyle{fancy}
\fancyhf{}
\lhead{--- DRAFT ---}
\rhead{\rightmark}
\lfoot{\today}
\rfoot{Page \thepage\ of \pageref{LastPage}}

%%%%
%% Watermark  
%%%%
\usepackage[firstpage]{draftwatermark} % to remove replace `firstpage` with `nostamp`
\SetWatermarkScale{5.0}


%%%%
%% Formatting source code 
%% 
%% Use Cases: 
%% 1. Include a file with source code 
%%    \lstinputlisting[language=Java]{HelloWorld.java}
%% 
%% 2. Environment 
%%    \begin{lstlisting}[language=Scheme] 
%%    (foldl + 0 '(1 2 3))
%%    \end{lstlisting}
%%
%% 3. Inline with English text
%%      \lstinline{int i;}
%%%%
\usepackage{listings}

\lstset{
language=SQL,                           % Code langugage
basicstyle=\ttfamily,                   % Code font, Examples: \footnotesize, \ttfamily
keywordstyle=\textbf,                   % Keywords font ('*' = uppercase)
escapeinside={(*}{*)},                  % Escape syntax e.g. (*$\Longrightarrow$*)
% commentstyle=\color{gray},              % Comments font
% numbers=left,                           % Line nums position
% numberstyle=\tiny,                      % Line-numbers fonts
% stepnumber=1,                           % Step between two line-numbers
% numbersep=5pt,                          % How far are line-numbers from code
% tabsize=2,                              % Default tab size
% captionpos=b,                           % Caption-position = bottom
% breaklines=true,                        % Automatic line breaking?
% breakatwhitespace=false,                % Automatic breaks only at whitespace?
% showspaces=false,                       % Dont make spaces visible
% showtabs=false,                         % Dont make tabs visible
frame=none,                             % A frame around the code
aboveskip=0.25in,                       % Top margin
belowskip=0.25in,                       % Bottom margin
xleftmargin=0.25in,                     % Left margin
xrightmargin=0.25in,                    % Right margin
columns=flexible,                       % Column format
morekeywords={                          % PartiQL additional keywords
  MISSING,
  VALUE, PIVOT, UNPIVOT,
  STRING, STRUCT, TUPLE, DECIMAL, INT, BOOL,
},
}

%------------------------------------------------------------------------------- 
% Macros
%------------------------------------------------------------------------------- 

% Define our own compact enumerate
\newenvironment{compact_enum}
{\setlength{\leftmargini}{1em}
\begin{enumerate}
  \setlength{\labelsep}{.3em} 
  \setlength{\itemsep}{.4em}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}}
{\end{enumerate}}

% Define our own compact itemize
\newenvironment{compact_item}
{\setlength{\leftmargini}{1em}
\begin{itemize}
  \setlength{\labelsep}{.3em} 
  \setlength{\itemsep}{.4em}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}}
{\end{itemize}}


%------------------------------------------------------------------------------- 
% Database symbols
%------------------------------------------------------------------------------- 

\def\join{$\bowtie$}
\def\ojoin{\setbox0=\hbox{$\bowtie$}%
  \rule[-.02ex]{.25em}{.4pt}\llap{\rule[\ht0]{.25em}{.4pt}}}
\def\leftouterjoin{\mathbin{\ojoin\mkern-5.8mu\bowtie}}
\def\rightouterjoin{\mathbin{\bowtie\mkern-5.8mu\ojoin}}
\def\fullouterjoin{\mathbin{\ojoin\mkern-5.8mu\bowtie\mkern-5.8mu\ojoin}}
\def\semijoin{\mbox{$\mathrel{\raise1pt\hbox{\vrule height5pt depth0pt\hskip-1.5pt$>$\hskip -2.5pt$<$}}$}}
\def\antisemijoin{\overline{\semijoin}}

%------------------------------------------------------------------------------- 
% Grammar symbols (BNFs and Tree Grammars) 
%------------------------------------------------------------------------------- 

% Formatting commands for tree grammars
\newcommand{\gn}[1]  {\textit{#1}}           % (N)on-terminal
\newcommand{\gt}[1]  {\texttt{\textbf{#1}}}  % (T)erminal
\newcommand{\gl}[1]  {\texttt{\textbf{#1}}}  % (L)iteral
\newcommand{\gs}[1]  {\textit{\textbf{#1}}}  % (S)pecial construct
\newcommand{\gob}[0] {[}                     % (O)ptional begin
\newcommand{\goe}[0] {]}                     % (O)ptional end
\newcommand{\gr}[0]  {...}                   % (R)epeat
\newcommand{\gp}[0]  {$\rightarrow$}         % (P)roduction rule
\newcommand{\gd}[0]  {$|$}                   % (D)isjunction

%------------------------------------------------------------------------------- 
% Misc symbols
%-------------------------------------------------------------------------------

% Undirected single quote mark
\chardef\singlequote=13


